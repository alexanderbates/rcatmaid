<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R access to the API for the CATMAID web image annotation tool • catmaid</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="R access to the API for the CATMAID web image annotation tool">
<meta property="og:description" content="This package provide access to the API exposed by the CATMAID (C
    ollaborative A nnotation T oolkit for M assive A mounts of I mage D ata)
    web tool. This includes a bridge to the neuroanatomy toolbox (R package
    nat), thereby allowing analysis and visualisation of neuronal skeletons.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">catmaid</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.9.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jefferis/rcatmaid">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    

<div id="catmaid" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#catmaid" class="anchor"></a>catmaid</h1></div>
<p>This package provides access to the <a href="http://catmaid.org/">CATMAID</a> API for <a href="http://r-project.org/">R</a> users. At present it provides low level functions for appropriately authenticated GET/POST requests, optionally parsing JSON responses. There are also intermediate level functions that retrieve skeleton (i.e. neuron) information, connectivity information for one or more neurons as well as a number of other API endpoints. Finally, there is a high level function to convert neurons to the representation of the <a href="https://github.com/jefferis/nat">nat</a> (NeuroAnatomy Toolbox) R package, enabling a wide variety of analyses.</p>
<p>It is strongly recommended to read through the instructions below, the <a href="http://jefferis.github.io/rcatmaid/reference/catmaid-package.html">package overview documentation</a> and then skim the <a href="http://jefferis.github.io/rcatmaid/reference/">reference documentation index</a> , which groups the available functions into useful categories.</p>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick start</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">"devtools"</span>)) <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co"># nb repo is rcatmaid, but R package name is catmaid</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"jefferis/rcatmaid"</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co"># use </span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="kw">library</span>(catmaid)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co"># general help starting point</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">?catmaid</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co"># examples</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="kw">example</span>(catmaid_login)</a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="kw">example</span>(catmaid_fetch)</a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="kw">example</span>(catmaid_get_compact_skeleton)</a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="kw">example</span>(catmaid_get_neuronnames)</a>
<a class="sourceLine" id="cb1-17" data-line-number="17"></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co"># use with nat</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="kw">library</span>(nat)</a>
<a class="sourceLine" id="cb1-20" data-line-number="20">nl=<span class="kw"><a href="reference/read.neuron.catmaid.html">read.neurons.catmaid</a></span>(<span class="kw">c</span>(<span class="dv">10418394</span>,<span class="dv">4453485</span>), <span class="dt">pid=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="kw">open3d</span>()</a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co"># nb this also plots the connectors (i.e. synapses) </span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co"># red = presynapses, cyan = postsynapses</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="kw"><a href="reference/plot3d.catmaidneuron.html">plot3d</a></span>(nl, <span class="dt">WithConnectors=</span><span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="fancier-example" class="section level2">
<h2 class="hasAnchor">
<a href="#fancier-example" class="anchor"></a>Fancier example</h2>
<p>This produces a 3D plot of the first and second order olfactory neurons coloured according to the peripheral odorant receptor.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># fetch olfactory receptor neurons</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">orns=<span class="kw"><a href="reference/read.neuron.catmaid.html">read.neurons.catmaid</a></span>(<span class="st">"name:ORN (left|right)"</span>, <span class="dt">.progress=</span><span class="st">'text'</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># calculate some useful metadata</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">orns[,<span class="st">'Or'</span>]=<span class="st"> </span><span class="kw">factor</span>(<span class="kw">sub</span>(<span class="st">" ORN.*"</span>, <span class="st">""</span>, orns[,<span class="st">'name'</span>]))</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co"># repeat for their PN partners, note use of search by annotation</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">pns=<span class="kw"><a href="reference/read.neuron.catmaid.html">read.neurons.catmaid</a></span>(<span class="st">"annotation:ORN PNs$"</span>, <span class="dt">.progress=</span><span class="st">'text'</span>)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">pns[,<span class="st">'Or'</span>]=<span class="st"> </span><span class="kw">factor</span>(<span class="kw">sub</span>(<span class="st">" PN.*"</span>, <span class="st">""</span>, pns[,<span class="st">'name'</span>]))</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co"># plot, colouring by odorant receptor</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="kw"><a href="reference/plot3d.catmaidneuron.html">plot3d</a></span>(orns, <span class="dt">col=</span>Or)</a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co"># note that we plot somata with a radius of 1500 nm</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="kw"><a href="reference/plot3d.catmaidneuron.html">plot3d</a></span>(pns, <span class="dt">col=</span>Or, <span class="dt">soma=</span><span class="dv">1500</span>)</a></code></pre></div>
</div>
<div id="even-fancier-example" class="section level2">
<h2 class="hasAnchor">
<a href="#even-fancier-example" class="anchor"></a>Even fancier example</h2>
<p>This follows on from the previous example. It identifies downstream partner neurons of the ORNs and plots them in 3d coloured by their synaptic strength. It then carries out morphological clustering with <a href="http://bit.ly/nblast">NBLAST</a> and plots the partner neurons according to those clusters.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># find all the ORN downstream partners with at least 2 synapses</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">orn_partners=<span class="kw"><a href="reference/catmaid_query_connected.html">catmaid_query_connected</a></span>(orns[,<span class="st">'skid'</span>], <span class="dt">minimum_synapses =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co"># keep the ones not already in our set of PNs</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co"># there are lots!</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">non_pn_downstream_ids=<span class="kw"><a href="http://dplyr.tidyverse.org/reference/setops.html">setdiff</a></span>(<span class="kw">unique</span>(orn_partners<span class="op">$</span>outgoing<span class="op">$</span>partner), pns[,<span class="st">'skid'</span>])</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co"># download and plot those neurons</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">non_pn_downstream=<span class="kw"><a href="reference/read.neuron.catmaid.html">read.neurons.catmaid</a></span>(non_pn_downstream_ids, <span class="dt">.progress=</span><span class="st">'text'</span>)</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="kw"><a href="reference/plot3d.catmaidneuron.html">plot3d</a></span>(non_pn_downstream, <span class="dt">col=</span><span class="st">'grey'</span>, <span class="dt">soma=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co"># remove the last set of plotted neurons</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="kw"><a href="http://www.rdocumentation.org/packages/nat/topics/npop3d">npop3d</a></span>()</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">## Plot, but colouring partners by number of synapses they receive from ORNs</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co"># first collect those synapse numbers</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb3-16" data-line-number="16">totsyndf=orn_partners<span class="op">$</span>outgoing <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(partner) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">totsyn=</span><span class="kw">sum</span>(syn.count)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw"><a href="http://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(totsyn))</a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="kw">hist</span>(totsyndf<span class="op">$</span>totsyn)</a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co"># now do the plot</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="kw">clear3d</span>()</a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co"># matlab style palette</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24">jet.colors &lt;-</a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="kw">colorRampPalette</span>(<span class="kw">c</span>(<span class="st">"#00007F"</span>, <span class="st">"blue"</span>, <span class="st">"#007FFF"</span>, <span class="st">"cyan"</span>,</a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="st">"#7FFF7F"</span>, <span class="st">"yellow"</span>, <span class="st">"#FF7F00"</span>, <span class="st">"red"</span>, <span class="st">"#7F0000"</span>))</a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co"># plot colouring by synapse number on a log scale </span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co"># note that it is necessary to convert totsyndf$partner to a character</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co"># vector to ensure that they are not treated as integer indices</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="kw"><a href="reference/plot3d.catmaidneuron.html">plot3d</a></span>(<span class="kw">as.character</span>(totsyndf<span class="op">$</span>partner),  <span class="dt">db=</span><span class="kw">c</span>(pns, non_pn_downstream), </a>
<a class="sourceLine" id="cb3-31" data-line-number="31">  <span class="dt">col=</span><span class="kw">jet.colors</span>(<span class="dv">10</span>)[<span class="kw">cut</span>(totsyndf<span class="op">$</span>totsyn, <span class="dt">breaks =</span> <span class="dv">2</span><span class="op">^</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>))], <span class="dt">soma=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb3-32" data-line-number="32"></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co"># Now let's cluster these other connected neurons</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="kw">library</span>(nat.nblast)</a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co"># convert to nblast-compatible format</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co"># nb also convert from nm to um, resample to 1µm spacing and use k=5</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="co"># nearest neighbours of each point to define tangent vector</span></a>
<a class="sourceLine" id="cb3-38" data-line-number="38">non_pn_downstream.dps=<span class="kw"><a href="http://www.rdocumentation.org/packages/nat/topics/dotprops">dotprops</a></span>(non_pn_downstream<span class="op">/</span><span class="fl">1e3</span>, <span class="dt">k=</span><span class="dv">5</span>, <span class="dt">resample=</span><span class="dv">1</span>, <span class="dt">.progress=</span><span class="st">'text'</span>)</a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co"># now compute all x all NBLAST scores and cluster</span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40">non_pn_downstream.aba=<span class="kw"><a href="http://www.rdocumentation.org/packages/nat.nblast/topics/nblast_allbyall">nblast_allbyall</a></span>(non_pn_downstream.dps, <span class="dt">.progress=</span><span class="st">'text'</span>)</a>
<a class="sourceLine" id="cb3-41" data-line-number="41">non_pn_downstream.hc=<span class="kw"><a href="http://www.rdocumentation.org/packages/nat.nblast/topics/nhclust">nhclust</a></span>(<span class="dt">scoremat =</span> non_pn_downstream.aba)</a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co"># plot result of clusterting as dendrogram, labelled by neuron name (rather than id)</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="kw">plot</span>(non_pn_downstream.hc, <span class="dt">label=</span>non_pn_downstream[,<span class="st">'name'</span>])</a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co"># open new window</span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="kw"><a href="http://www.rdocumentation.org/packages/nat/topics/nopen3d">nopen3d</a></span>()</a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co"># plot in 3d cutting into 2 clusters essentially left right</span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"><span class="kw"><a href="reference/plot3d.catmaidneuron.html">plot3d</a></span>(non_pn_downstream.hc,<span class="dt">db=</span>non_pn_downstream, <span class="dt">k=</span><span class="dv">2</span>, <span class="dt">soma=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="kw">clear3d</span>() </a>
<a class="sourceLine" id="cb3-49" data-line-number="49"><span class="co"># 4 clusters - note local and projection neurons, gustatory neurons</span></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="kw"><a href="reference/plot3d.catmaidneuron.html">plot3d</a></span>(non_pn_downstream.hc,<span class="dt">db=</span>non_pn_downstream, <span class="dt">k=</span><span class="dv">4</span>, <span class="dt">soma=</span><span class="dv">1000</span>)</a></code></pre></div>
</div>
<div id="authentication" class="section level2">
<h2 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h2>
<p>You will obviously need to have the login details of a valid CATMAID instance to try this out. As of December 2015 CATMAID is moving to token based authentication. For this you will need to get an API token when you are logged into the CATMAID web client in your browser. See <a href="http://catmaid.github.io/dev/api.html#api-token" class="uri">http://catmaid.github.io/dev/api.html#api-token</a> for details.</p>
<p>Once you have the login information you can use the <code>catmaid_login</code> function to authenticate. The minimal information is your server URL and your CATMAID token.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="http://www.rdocumentation.org/packages/catmaid/topics/catmaid_login">catmaid_login</a></span>(<span class="dt">server=</span><span class="st">"https://mycatmaidserver.org/catmaidroot"</span>,</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">              <span class="dt">authname=</span><span class="st">"Calvin"</span>,<span class="dt">authpassword=</span><span class="st">"hobbes"</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">              <span class="dt">token=</span><span class="st">"9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b"</span>)</a></code></pre></div>
<p>Note that the CATMAID servers that I am aware of require two layers of password protection, an outer HTTP auth type user/password combination as well as an inner CATMAID-specific token based login. The outer HTTP auth type user/password combination may be specific to you or generic to the project.</p>
<div id="setting-environment-variables-in-your--renviron-file" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-environment-variables-in-your--renviron-file" class="anchor"></a>Setting environment variables in your .Renviron file</h3>
<p>It is recommended that you set your login details by including code like this in in your <a href="https://www.rdocumentation.org/packages/base/versions/3.4.0/topics/Startup">.Renviron file</a>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">catmaid.server=<span class="st">"https://mycatmaidserver.org/catmaidroot"</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">catmaid.token=<span class="st">"9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b"</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co"># additional security for mycatmaidserver.org/catmaidroot page</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">catmaid.authname=<span class="st">"Calvin"</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">catmaid.authpassword=<span class="st">"hobbes"</span></a></code></pre></div>
<p>Be sure to leave one blank line at the end of the .Renviron file, or it will not work.</p>
<p>In this way authentication will happen transparently as required by all functions that interact with the specified CATMAID server.</p>
</div>
<div id="setting-environment-variables-in-your--rprofile-file" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-environment-variables-in-your--rprofile-file" class="anchor"></a>Setting environment variables in your .Rprofile file</h3>
<p>Alternatively you can set package options in your .Rprofile file, but the environment variable approach is now recommended as it handles a few edge cases where options are not read by R processes e.g. when building vignettes.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">options</span>(<span class="dt">catmaid.server=</span><span class="st">"https://mycatmaidserver.org/catmaidroot"</span>,</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  <span class="dt">catmaid.authname=</span><span class="st">"Calvin"</span>,<span class="dt">catmaid.authpassword=</span><span class="st">"hobbes"</span>,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="dt">catmaid.token=</span><span class="st">"9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b"</span>)</a></code></pre></div>
<p>Once again, be sure to leave one blank line at the end of the .Rprofile file, or it will not work.</p>
</div>
<div id="cached-authentication" class="section level3">
<h3 class="hasAnchor">
<a href="#cached-authentication" class="anchor"></a>Cached authentication</h3>
<p>Whether you use options in your <code>.Renviron</code> as described above or you login explicitly at the start of a session using <code>catmaid_login</code> the access credentials will be cached for the rest of the session. You can still authenticate explicitly to a different CATMAID server (using <code>catmaid_login</code>) if you wish.</p>
</div>
<div id="multiple-servers" class="section level3">
<h3 class="hasAnchor">
<a href="#multiple-servers" class="anchor"></a>Multiple servers</h3>
<p>If you use more than one CATMAID server but always do so in different sessions or rmarkdown scripts then you can save an appropriate <code>.Renviron</code> file in the project folder.</p>
<p>If you need to talk to more than one CATMAID server in a single session then you must use <code>catmaid_login</code> to login into each server</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># log in to default server specified in .Renviron/.Rprofile</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">conn1=<span class="kw"><a href="http://www.rdocumentation.org/packages/catmaid/topics/catmaid_login">catmaid_login</a></span>()</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># log into another server, presumably with different credentials</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">conn2=<span class="kw"><a href="http://www.rdocumentation.org/packages/catmaid/topics/catmaid_login">catmaid_login</a></span>(<span class="dt">server=</span><span class="st">'https://my.otherserver.com'</span>, ...)</a></code></pre></div>
<p>and then use the returned connection objects with any calls you make e.g.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># fetch neuron from server 1</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">n1=<span class="kw"><a href="http://www.rdocumentation.org/packages/nat/topics/read.neuron">read.neuron</a></span>(<span class="dv">123</span>, <span class="dt">conn=</span>conn1)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co"># fetch neuron from server 2</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">n2=<span class="kw"><a href="http://www.rdocumentation.org/packages/nat/topics/read.neuron">read.neuron</a></span>(<span class="dv">123</span>, <span class="dt">conn=</span>conn2)</a></code></pre></div>
<p>n.b. you must use connection objects to talk to both servers because if no connection object is specified, the last connection will be re-used.</p>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Currently there isn’t a released version on <a href="https://cran.r-project.org/">CRAN</a> but can use the <strong>devtools</strong> package to install the development version:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">"devtools"</span>)) <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"jefferis/rcatmaid"</span>)</a></code></pre></div>
<p>Note: Windows users need <a href="https://cran.r-project.org/bin/windows/Rtools/">Rtools</a> and <a href="https://cran.r-project.org/package=devtools">devtools</a> to install this way.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>Based on python code presently visible at:</p>
<ul>
<li><a href="https://github.com/catmaid/CATMAID/blob/master/scripts/remote/access.py" class="uri">https://github.com/catmaid/CATMAID/blob/master/scripts/remote/access.py</a></li>
<li><a href="https://github.com/catmaid/CATMAID/blob/master/django/applications/catmaid/urls.py" class="uri">https://github.com/catmaid/CATMAID/blob/master/django/applications/catmaid/urls.py</a></li>
<li><a href="https://github.com/schlegelp/CATMAID-to-Blender/blob/master/CATMAIDImport.py" class="uri">https://github.com/schlegelp/CATMAID-to-Blender/blob/master/CATMAIDImport.py</a></li>
</ul>
<p>by Albert Cardona and Philipp Schlegel. Released under the GPL-3 license.</p>
</div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/jefferis/rcatmaid">https://​github.com/​jefferis/​rcatmaid</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jefferis/rcatmaid/issues">https://​github.com/​jefferis/​rcatmaid/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Gregory Jefferis <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0587-9355" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/jefferis/rcatmaid"><img src="https://travis-ci.org/jefferis/rcatmaid.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://github.com/jefferis/rcatmaid/releases/latest"><img src="https://img.shields.io/github/release/jefferis/rcatmaid.svg" alt="Release Version"></a></li>
<li><a href="http://jefferis.github.io/rcatmaid/"><img src="https://img.shields.io/badge/docs-100%25-brightgreen.svg" alt="Docs"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/25650381"><img src="https://zenodo.org/badge/25650381.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
